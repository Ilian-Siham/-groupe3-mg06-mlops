name: Test AWS Connection
on:
  [cite_start]workflow_dispatch # Permet de lancer le test manuellement depuis l'interface GitHub [cite: 40]

jobs:
  test-aws:
    [cite_start]runs-on: ubuntu-latest [cite: 43]
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Configure AWS credentials
        [cite_start]uses: aws-actions/configure-aws-credentials@v2 [cite: 46]
        with:
          [cite_start]aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }} [cite: 48]
          [cite_start]aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }} [cite: 49]
          [cite_start]aws-region: ${{ secrets.AWS_REGION }} [cite: 50]

      - name: Test AWS credentials validity
        run: |
          echo "Testing AWS credentials..." [cite: 53]
          aws sts get-caller-identity [cite: 54]

      - name: List S3 buckets
        run: |
          echo "Listing S3 buckets..." [cite: 57]
          aws s3 ls [cite: 57]